<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Annapurna</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com"> 
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

</head>
<body>
    <section class="sub-header">
        <nav>
            <a href="index.html"><img src="images/Annapurna.png" alt=""></a>
            <div class="nav-links" id="navLinks">
                <i class="fa fa-times" onclick="hideMenu()"></i>
                <ul>
                    <li><a href="index.html">HOME</a></li>
                    <li><a href="about.html">ABOUT</a></li>
                    <li><a href="blog.html">DONATE</a></li>
                    <li><a href="course.html">REQUEST</a></li>
                    <li><a href="volunteer.html">VOLUNTEER</a></li>
                    <li><a href="contact.html">CONTACT US</a></li>
                </ul>
            </div>
            <i class="fa fa-bars" onclick="showMenu()" ></i>
        </nav>
    
        <h1>Donate Food</h1>
    </section>
    <!-----blog page content------>
    <section class="blog-content">
        <div class="row">
            <div class="blog-left">
                <!-- <img src="eduford_img/certificate.jpg" alt=""> -->
                <h2>Donate Food for Poor People and their Families</h2>
                <p>Annapurna is a service that provides free and nutritious food to the families of underprivileged people. This is especially important for those who come from nearby states for work and are often poor, as their family members may not have time to take care of themselves or even eat, as they focus on working for their loved ones. By offering free meals, Annapurna helps support these families and alleviate some of their stress during a difficult time.</p>
        
                <div class="comment-box">
                    <h3>Submit this form to Donate Food !</h3>
                    <p>Our Team will Contact and Reach you within 1 Hour</p>
                    <br>
                    <form action="" class="comment-form">
                        <p style="color: black; font-weight:400;" >Name
                        <input type="text" placeholder="Enter Name"></p>
                        <p style="color: black; font-weight:400;" >Phone Number
                        <input type="tel" placeholder="Enter Phone No."></p>
                        <p style="color: black; font-weight:400;" >Food Items & Quantity
                        <textarea name="" id="" rows="3" placeholder="Food Items you want to Donate"></textarea></p>
                        <p style="color: black; font-weight:400;" >Address
                        <textarea name="" id="" rows="3" placeholder="Enter Your Address"></textarea></p>
                        <button type="submit" class="hero-btn red-btn">SUBMIT</button>
                    </form>
                </div>

            </div>
            <div class="blog-right">
                <h3>Past Donations</h3>
                <div>
                    <span>Kudasan</span>
                    <span>21</span>
                </div>
                <div>
                    <span>vidisha</span>
                    <span>43</span>
                </div>
               
                <div id="pastDonations">
                    <!-- Donations will be dynamically added here -->
                </div>

            </div>
        </div>
    </section>
    
    
   
    <!------Footer------->
    <section class="footer">
        <h4>About Us</h4>
        <p>We are a team of thoughtful people ready to help everyone we can</p>
        <di class="icons">
            <i class="fa fa-facebook"></i>
            <i class="fa fa-twitter"></i>
            <i class="fa fa-instagram" aria-hidden="true"></i>
            <i class="fa fa-linkedin"></i>
        </di>
        <p>Made with  <i class="fa fa-heart"></i> by MindHackers</p>
    </section>

 

  <!-- JavaScript code -->
  <script>

    // old code
    var navLinks = document.getElementById("navLinks");

    function showMenu(){
    navLinks.style.right = "0"
    }
    function hideMenu(){
    navLinks.style.right = "-200px"
    }
    console.log("script is working")

    // new code
    // Fetch past donations data from backend API

    fetch('http://localhost:8040/getDonar')
    .then(response => {
        console.log("data fetched");
        console.log(response);

        if (!response.ok) {
            throw new Error('Failed to fetch past donations');
        }
        return response.json();
    })
    .then(data => {
        // Get the element where past donations will be displayed
        const pastDonationsElement = document.getElementById('pastDonations');
        console.log("getdonar api called");

        // Clear existing content in the pastDonationsElement
        pastDonationsElement.innerHTML = '';

        // Iterate over the aggregated data and create HTML elements to display each donation
        for (const city in data) {
            if (data.hasOwnProperty(city)) {
                const quantity = data[city];
                const donationElement = document.createElement('div');
                // Wrap each city and quantity pair in its own <div> element
                donationElement.innerHTML = `<div><span>${city}</span><br><span>${quantity}</span></div>`;
                pastDonationsElement.appendChild(donationElement);
            }
        }

    })
    .catch(error => console.error('Error fetching past donations:', error));

</script>
</body>
</html>